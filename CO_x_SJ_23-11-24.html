<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Estatísticas dos Jogos</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>

<body class="max-vh-100 overflow-auto">
    <!-- game title-->
    <div id="header-container">
        <h1 id="header-text" class="text-center bg-primary text-light border rounded shadow m-1 p-1"><strong>Selecione
                um jogo</strong></h1>
    </div>
    <!-- buttoms container-->
    <div id="buttoms-container" class="d-flex justify-content-center fles-wrap">
        <button id="q1-btn" class="btn btn-primary m-1 shadow-sm"><strong>Q1</strong></button>
        <button id="q2-btn" class="btn btn-primary m-1 shadow-sm"><strong>Q2</strong></button>
        <button id="q3-btn" class="btn btn-primary m-1 shadow-sm"><strong>Q3</strong></button>
        <button id="q4-btn" class="btn btn-primary m-1 shadow-sm"><strong>Q4</strong></button>
        <button id="ot-btn" class="btn btn-primary m-1 shadow-sm"><strong>OT</strong></button>
        <button id="total-btn" class="btn btn-primary m-1 shadow-sm"><strong>ALL</strong></button>
        <!-- Button trigger modal performance -->
        <button type="button" class="btn btn-primary btn-lg m-1 shadow-sm" data-bs-toggle="modal"
            data-bs-target="#performanceModal">
            <i class="fa-solid fa-chart-line"></i>
        </button>
        <!-- Button trigger modal game selection -->
        <button type="button" class="btn btn-primary btn-lg m-1 shadow-sm" data-bs-toggle="modal"
            data-bs-target="#gameSelectionModal">
            <i class="fa-solid fa-magnifying-glass"></i>
        </button>
    </div>
    <!-- stats container -->
    <div id="body-container" class="row p-2">
        <div id="stats-container" class="col m-1 shadow-lg border" style="max-height: 85vh; overflow-y: auto">
            <h2 id="stats-header" class="text-center bg-primary text-light border rounded p-1">Estatísticas</h2>
            <table id="table-stats" class="table table-hover table-responsive">
                <tbody>
                    <tr id="btn-pts">
                        <td>
                            <button class="btn btn-outline-secondary"><strong>PTS </strong></button>
                        </td>
                        <td>
                            <button class="btn btn-outline-secondary"><span id="pts-stats">0</span></button>
                        </td>
                    </tr>
                    <tr id="btn-reb">
                        <td>
                            <button class="btn btn-outline-secondary"><strong>REB</strong></button>
                        </td>
                        <td>
                            <button class="btn btn-outline-secondary"> <span id="reb-stats">0</span></button>
                        </td>
                    </tr>
                    <tr id="btn-ast">
                        <td>
                            <button class="btn btn-outline-secondary"><strong> AST </strong></button>
                        </td>
                        <td>
                            <button class="btn btn-outline-secondary"> <span id="ast-stats">0</span></button>
                        </td>
                    </tr>
                    <tr id="btn-stl">
                        <td>
                            <button class="btn btn-outline-secondary"><strong>STL</strong></button>
                        </td>
                        <td>
                            <button class="btn btn-outline-secondary"><span id="stl-stats">0</span></button>
                        </td>
                    </tr>
                    <tr id="btn-blk">
                        <td>
                            <button class="btn btn-outline-secondary"><strong>BLK</strong></button>
                        </td>
                        <td>
                            <button class="btn btn-outline-secondary"><span id="blk-stats">0</span></button>
                        </td>
                    </tr>
                    <tr id="btn-to">
                        <td>
                            <button class="btn btn-outline-secondary"><strong>TOV</strong></button>
                        </td>
                        <td>
                            <button class="btn btn-outline-secondary"><span id="to-stats">0</span></button>
                        </td>
                    </tr>
                    <tr id="btn-fg">
                        <td>
                            <button class="btn btn-outline-secondary"><strong>FGS</strong></button>
                        </td>
                        <td>
                            <button class="btn btn-outline-secondary"><span id="fgm-stats">0</span>/<span
                                    id="fga-stats">0</span></button>
                        </td>
                    </tr>
                    <tr id="btn-3pt">
                        <td>
                            <button class="btn btn-outline-secondary"><strong>3PT</strong></button>
                        </td>
                        <td>
                            <button class="btn btn-outline-secondary"><span id="tpm-stats">0</span>/<span
                                    id="tpa-stats">0</span></button>
                        </td>
                    </tr>
                    <tr id="btn-ft">
                        <td>
                            <button class="btn btn-outline-secondary"><strong>FTR</strong></button>
                        </td>
                        <td>
                            <button class="btn btn-outline-secondary"><span><span id="ftm-stats">0</span>/<span
                                        id="fta-stats">0</span></span></button>
                        </td>
                    </tr>
                    <tr id="btn-pf">
                        <td>
                            <button class="btn btn-outline-secondary"><strong>PFS</strong></button>
                        </td>
                        <td>
                            <button class="btn btn-outline-secondary"><span id="pf-stats">0</span></button>
                        </td>
                    </tr>
                    <tr id="btn-eff">
                        <td>
                            <button class="btn btn-outline-secondary"><strong>EFF</strong></button>
                        </td>
                        <td>
                            <button class="btn btn-outline-secondary"><span id="eff-stats">0</span></button>
                        </td>
                    </tr>
                </tbody>
            </table>

        </div>


        <!-- Modal performance-->
        <div class="modal fade" id="performanceModal" tabindex="-1" aria-labelledby="performanceModalLabel"
            aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title" id="performanceModalLabel">Análise de desempenho</h4>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">

                        <table id="offensive-table" class="table table-hover">
                            <thead>
                                <tr>
                                    <th>
                                        <h2>Desempenho Geral: </h2>
                                    </th>
                                    <th>
                                        </td>
                                        <h2><span id="desempenho-geral" class="badge"></span></h2>
                                    </th>
                                </tr>
                            </thead>
                            <thead>
                                <tr>
                                    <th>
                                        <h3>Ofensivo: </h3>
                                    </th>
                                    <th>
                                        <h3><span id="desempenho-ofensivo" class="badge"></span></h3>
                                    </th>
                                </tr>
                            </thead>
                            <!-- ofensive table body-->
                            <tbody>
                                <tr data-bs-toggle="collapse" data-bs-target="#card-participacao">
                                    <td>Participação</td>
                                    <td>
                                        <h5><span id="badge-participacao" class="badge"></span></h5>
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="2">
                                        <div id="card-participacao" class="card card-body collapse">

                                        </div>
                                    </td>
                                </tr>
                                <tr data-bs-toggle="collapse" data-bs-target="#card-seguranca-bola">
                                    <td>Segurança com a bola</td>
                                    <td>
                                        <h5><span id="badge-seguranca-bola" class="badge"></span></h5>
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="2">
                                        <div id="card-seguranca-bola" class="card card-body collapse">

                                        </div>
                                    </td>
                                </tr>
                                <tr data-bs-toggle="collapse" data-bs-target="#card-selecao-arremessos">
                                    <td>Arremessos</td>
                                    <td>
                                        <h5><span id="badge-selecao-arremessos" class="badge"></span></h5>
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="2">
                                        <div id="card-selecao-arremessos" class="card card-body collapse ">

                                        </div>
                                    </td>
                                </tr>
                                <tr data-bs-toggle="collapse" data-bs-target="#card-passes">
                                    <td>Passes</td>
                                    <td>
                                        <h5><span id="badge-passes" class="badge"></span></h5>
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="2">
                                        <div id="card-passes" class="card card-body collapse">

                                        </div>
                                    </td>
                                </tr>
                                <tr data-bs-toggle="collapse" data-bs-target="#card-infiltracao">
                                    <td>Infiltração</td>
                                    <td>
                                        <h5><span id="badge-infiltracao" class="badge"></span></h5>
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="2">
                                        <div id="card-infiltracao" class="card card-body collapse">

                                        </div>
                                    </td>
                                </tr>
                                <tr data-bs-toggle="collapse" data-bs-target="#card-transicao-ofensiva">
                                    <td>Transição</td>
                                    <td>
                                        <h5><span id="badge-transicao-ofensiva" class="badge"></span></h5>
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="2">
                                        <div id="card-transicao-ofensiva" class="card card-body collapse">
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                            <thead>
                                <tr>
                                    <th>
                                        <h3>Defensivo: </h3>
                                    </th>
                                    <th>
                                        <h3><span id="desempenho-defensivo" class="badge"></span></h3>
                                    </th>
                                </tr>
                            </thead>
                            <!-- defensive table body-->
                            <tbody>
                                <tr data-bs-toggle="collapse" data-bs-target="#card-dedicacao-defensiva">
                                    <td>Dedicação</td>
                                    <td>
                                        <h5><span id="badge-dedicacao-defensiva" class="badge"></span></h5>
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="2">
                                        <div id="card-dedicacao-defensiva" class="card card-body collapse">

                                        </div>
                                    </td>
                                </tr>
                                <tr data-bs-toggle="collapse" data-bs-target="#card-defesa-bola">
                                    <td>Defesa na bola</td>
                                    <td>
                                        <h5><span id="badge-defesa-bola" class="badge"></span></h5>
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="2">
                                        <div id="card-defesa-bola" class="card card-body collapse">

                                        </div>
                                    </td>
                                </tr>
                                <tr data-bs-toggle="collapse" data-bs-target="#card-pick">
                                    <td>Pick and roll</td>
                                    <td>
                                        <h5><span id="badge-pick" class="badge"></span></h5>
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="2">
                                        <div id="card-pick" class="card card-body collapse">

                                        </div>
                                    </td>
                                </tr>
                                <tr data-bs-toggle="collapse" data-bs-target="#card-ajuda">
                                    <td>Ajuda defensiva</td>
                                    <td>
                                        <h5><span id="badge-ajuda" class="badge"></span></h5>
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="2">
                                        <div id="card-ajuda" class="card card-body collapse">

                                        </div>
                                    </td>
                                </tr>
                                <tr data-bs-toggle="collapse" data-bs-target="#card-transicao-defensiva">
                                    <td>Transição</td>
                                    <td>
                                        <h5><span id="badge-transicao-defensiva" class="badge"></span>
                                        </h5>
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="2">
                                        <div id="card-transicao-defensiva" class="card card-body collapse">

                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>

                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal game selection-->
        <div class="modal fade" id="gameSelectionModal" tabindex="-1" aria-labelledby="gameSelectionModalLabel"
            aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title" id="gameSelectionModalLabel">Selecione um jogo para visualizar as
                            estatísticas</h4>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form action="post" class="form">
                            <label for="player-selection">Jogador</label>
                            <select name="player-selection" id="player-selection">
                                <option value="Gabriel">Gabriel</option>
                                <option value="Tais">Tais</option>
                            </select>
                            <label for="game-selection">Jogo</label>
                            <select name="game-selection" id="game-selection">

                            </select>
                        </form>


                    </div>
                    <div class="modal-footer">
                        <button id="btn-select-game" type="button" class="btn btn-primary"
                            data-bs-dismiss="modal">Selecionar</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- events list-->
        <div id="events-container" class="col m-1 shadow-lg border" style="max-height: 85vh; overflow-y: auto">
            <h2 id="events-header" class="text-center bg-primary text-light border rounded p-1">Eventos</h2>
            <ol id="events-list" class="list-group m-4 mt-1">

            </ol>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <script>
        function fetchData() {
            fetch('https://raw.githubusercontent.com/joaocbarrozo/game-stats/refs/heads/main/jogos.JSON')
                .then(response => response.json())
                .then(data => {
                    // player selected
                    const playerSelected = document.getElementById("player-selection").value;
                    const player = data["jogadores"].find(jogador => jogador.nome === playerSelected);

                    // game selected
                    const gameSelected = document.getElementById("game-selection");
                    const game = player["jogos"].find(jogo => jogo.data === gameSelected.value);
                    //Game links
                    const dataLinks = game.links;
                    // performance grades and comments
                    const performance = game.desempenho;
                    // ol element
                    const orderedList = document.getElementById('events-list');
                    orderedList.innerHTML = "";
                    // Create a new list item element for each link
                    dataLinks.forEach(link => {
                        const listItem = document.createElement('li');
                        listItem.innerHTML = `<a href="${link["url"]}">${link["descrição"]}</a>`;
                        orderedList.appendChild(listItem);
                    });
                    // variable to show the header text
                    const headerText = document.getElementById("header-text");
                    headerText.textContent = `${game.time} X ${game["adversário"]} - ${game.data}`;

                    // variable links to control which links to show
                    const links = document.querySelectorAll('#events-list li');
                    // variables to show performance grades
                    const desempenhoGeral = document.getElementById('desempenho-geral');
                    desempenhoGeral.innerText = performance["valor"];

                    const desempenhoOfensivo = document.getElementById('desempenho-ofensivo');
                    desempenhoOfensivo.innerText = performance["ofensivo"]["valor"];

                    const badgeParticipacao = document.getElementById('badge-participacao');
                    badgeParticipacao.innerText = performance["ofensivo"]["detalhes"].find(detalhe => detalhe.categoria === "Participação").nota;

                    const cardParticipacao = document.getElementById('card-participacao');
                    cardParticipacao.innerText = performance["ofensivo"]["detalhes"].find(detalhe => detalhe.categoria === "Participação").comentario;

                    const badgeSegurancaBola = document.getElementById('badge-seguranca-bola');
                    badgeSegurancaBola.innerText = performance["ofensivo"]["detalhes"].find(detalhe => detalhe.categoria === "Segurança com a bola").nota;

                    const cardSegurancaBola = document.getElementById('card-seguranca-bola');
                    cardSegurancaBola.innerText = performance["ofensivo"]["detalhes"].find(detalhe => detalhe.categoria === "Segurança com a bola").comentario;

                    const badgeSelecaoArremessos = document.getElementById('badge-selecao-arremessos');
                    badgeSelecaoArremessos.innerText = performance["ofensivo"]["detalhes"].find(detalhe => detalhe.categoria === "Arremessos").nota;

                    const cardSelecaoArremessos = document.getElementById('card-selecao-arremessos');
                    cardSelecaoArremessos.innerText = performance["ofensivo"]["detalhes"].find(detalhe => detalhe.categoria === "Arremessos").comentario;

                    const badgePasses = document.getElementById('badge-passes');
                    badgePasses.innerText = performance["ofensivo"]["detalhes"].find(detalhe => detalhe.categoria === "Passes").nota;

                    const cardPasses = document.getElementById('card-passes');
                    cardPasses.innerText = performance["ofensivo"]["detalhes"].find(detalhe => detalhe.categoria === "Passes").comentario;

                    const badgeInfiltracao = document.getElementById('badge-infiltracao');
                    badgeInfiltracao.innerText = performance["ofensivo"]["detalhes"].find(detalhe => detalhe.categoria === "Infiltração").nota;

                    const cardInfiltracao = document.getElementById('card-infiltracao');
                    cardInfiltracao.innerText = performance["ofensivo"]["detalhes"].find(detalhe => detalhe.categoria === "Infiltração").comentario;

                    const badgeTransicaoOfensiva = document.getElementById('badge-transicao-ofensiva');
                    badgeTransicaoOfensiva.innerText = performance["ofensivo"]["detalhes"].find(detalhe => detalhe.categoria === "Transição").nota;

                    const cardTransicaoOfensiva = document.getElementById('card-transicao-ofensiva');
                    cardTransicaoOfensiva.innerText = performance["ofensivo"]["detalhes"].find(detalhe => detalhe.categoria === "Transição").comentario;

                    const desempenhoDefensivo = document.getElementById('desempenho-defensivo');
                    desempenhoDefensivo.innerText = performance["defensivo"]["valor"];

                    const badgeDedicacaoDefensiva = document.getElementById('badge-dedicacao-defensiva');
                    badgeDedicacaoDefensiva.innerText = performance["defensivo"]["detalhes"].find(detalhe => detalhe.categoria === "Dedicação").nota;

                    const cardDedicacaoDefensiva = document.getElementById('card-dedicacao-defensiva');
                    cardDedicacaoDefensiva.innerText = performance["defensivo"]["detalhes"].find(detalhe => detalhe.categoria === "Dedicação").comentario;

                    const badgeDefesaBola = document.getElementById('badge-defesa-bola');
                    badgeDefesaBola.innerText = performance["defensivo"]["detalhes"].find(detalhe => detalhe.categoria === "Defesa na bola").nota;

                    const cardDefesaBola = document.getElementById('card-defesa-bola');
                    cardDefesaBola.innerText = performance["defensivo"]["detalhes"].find(detalhe => detalhe.categoria === "Defesa na bola").comentario;

                    const badgePick = document.getElementById('badge-pick');
                    badgePick.innerText = performance["defensivo"]["detalhes"].find(detalhe => detalhe.categoria === "Pick and roll").nota;

                    const cardPick = document.getElementById('card-pick');
                    cardPick.innerText = performance["defensivo"]["detalhes"].find(detalhe => detalhe.categoria === "Pick and roll").comentario;

                    const badgeAjuda = document.getElementById('badge-ajuda');
                    badgeAjuda.innerText = performance["defensivo"]["detalhes"].find(detalhe => detalhe.categoria === "Ajuda defensiva").nota;

                    const cardAjuda = document.getElementById('card-ajuda');
                    cardAjuda.innerText = performance["defensivo"]["detalhes"].find(detalhe => detalhe.categoria === "Ajuda defensiva").comentario;

                    const badgeTransicaoDefensiva = document.getElementById('badge-transicao-defensiva');
                    badgeTransicaoDefensiva.innerText = performance["defensivo"]["detalhes"].find(detalhe => detalhe.categoria === "Transição").nota;

                    const cardTransicaoDefensiva = document.getElementById('card-transicao-defensiva');
                    cardTransicaoDefensiva.innerText = performance["defensivo"]["detalhes"].find(detalhe => detalhe.categoria === "Transição").comentario;

                    // variables to change headers text
                    const statsHeader = document.getElementById("stats-header");
                    const eventsHeader = document.getElementById("events-header");
                    // stats vaiables
                    let pts = [0, 0, 0, 0, 0]
                    let fgm = [0, 0, 0, 0, 0];
                    let fga = [0, 0, 0, 0, 0];
                    let tpm = [0, 0, 0, 0, 0];
                    let tpa = [0, 0, 0, 0, 0];
                    let rebOff = [0, 0, 0, 0, 0];
                    let rebDef = [0, 0, 0, 0, 0];
                    let ast = [0, 0, 0, 0, 0];
                    let stl = [0, 0, 0, 0, 0];
                    let blk = [0, 0, 0, 0, 0];
                    let to = [0, 0, 0, 0, 0];
                    let ftm = [0, 0, 0, 0, 0];
                    let fta = [0, 0, 0, 0, 0];
                    let pf = [0, 0, 0, 0, 0];
                    let eff = [0, 0, 0, 0, 0];

                    // quarters variables
                    const quarters = ["Q1", "Q2", "Q3", "Q4", "OT"]

                    // span variables to show stats
                    const ptsStats = document.getElementById('pts-stats');
                    const rebStats = document.getElementById('reb-stats');
                    const astStats = document.getElementById('ast-stats');
                    const stlStats = document.getElementById('stl-stats');
                    const blkStats = document.getElementById('blk-stats');
                    const toStats = document.getElementById('to-stats');
                    const fgmStats = document.getElementById('fgm-stats');
                    const fgaStats = document.getElementById('fga-stats');
                    const tpmStats = document.getElementById('tpm-stats');
                    const tpaStats = document.getElementById('tpa-stats');
                    const ftmStats = document.getElementById('ftm-stats');
                    const ftaStats = document.getElementById('fta-stats');
                    const pfStats = document.getElementById('pf-stats');
                    const effStats = document.getElementById('eff-stats');

                    // stylish a links
                    links.forEach(link => {
                        const linkAnchor = link.querySelector('a');
                        const linkText = linkAnchor.textContent;
                        if (linkText.match('FGA') || linkText.match('3PA') || linkText.match('LL-0') || linkText.match('LL-1/2') || linkText.match('LL-1/3')
                            || linkText.match('TO') || linkText.match('FP')) {
                            linkAnchor.classList.add("btn", "btn-outline-danger", "mb-1");
                        } else if (linkText.match('POS') || linkText.match('NEG') || linkText.match('OBS')) {
                            linkAnchor.classList.add("btn", "btn-outline-warning", "mb-1");
                        } else {
                            linkAnchor.classList.add("btn", "btn-outline-success", "mb-1");
                        }
                    });

                    // stylish performance badges
                    const badges = document.querySelectorAll(".badge");
                    badges.forEach(badge => {
                        if (parseInt(badge.textContent) >= 75) {
                            badge.classList.add("bg-success")
                        } else if (parseInt(badge.textContent) >= 50) {
                            badge.classList.add("bg-warning")
                        } else {
                            badge.classList.add("bg-danger")
                        }
                    });

                    //calculates stats per quarter
                    function calculateStats(links, quarters) {
                        for (let i = 0; i < quarters.length; i++) {
                            links.forEach(link => {
                                const linkText = link.querySelector('a').textContent;
                                if (linkText.startsWith(quarters[i])) {
                                    if (linkText.match('FGA')) {
                                        fga[i] += 1;
                                        eff[i] -= 1;
                                    } else if (linkText.match('FGM')) {
                                        pts[i] += 2;
                                        fga[i] += 1;
                                        fgm[i] += 1;
                                        eff[i] += 2;
                                    }
                                    else if (linkText.match('3PM')) {
                                        pts[i] += 3;
                                        tpm[i] += 1;
                                        tpa[i] += 1;
                                        eff[i] += 3;
                                    } else if (linkText.match('3PA')) {
                                        tpa[i] += 1;
                                        eff[i] -= 1;
                                    } else if (linkText.match('LL-0/1')) {
                                        pts[i] += 0;
                                        ftm[i] += 0;
                                        fta[i] += 1;
                                        eff[i] -= 1;
                                    } else if (linkText.match('LL-1/1')) {
                                        pts[i] += 1;
                                        ftm[i] += 1;
                                        fta[i] += 1;
                                        eff[i] += 1;
                                    } else if (linkText.match('LL-0/2')) {
                                        pts[i] += 0;
                                        ftm[i] += 0;
                                        fta[i] += 2;
                                        eff[i] -= 2;
                                    } else if (linkText.match('LL-1/2')) {
                                        pts[i] += 1;
                                        ftm[i] += 1;
                                        fta[i] += 2;
                                        eff[i] += 0;
                                    } else if (linkText.match('LL-2/2')) {
                                        pts[i] += 2;
                                        ftm[i] += 2;
                                        fta[i] += 2;
                                        eff[i] += 2;
                                    } else if (linkText.match('LL-0/3')) {
                                        pts[i] += 0;
                                        ftm[i] += 0;
                                        fta[i] += 3;
                                        eff[i] -= 3;
                                    } else if (linkText.match('LL-1/3')) {
                                        pts[i] += 1;
                                        ftm[i] += 1;
                                        fta[i] += 3;
                                        eff[i] -= 1;
                                    } else if (linkText.match('LL-2/3')) {
                                        pts[i] += 2;
                                        ftm[i] += 2;
                                        fta[i] += 3;
                                        eff[i] += 1;
                                    } else if (linkText.match('LL-3/3')) {
                                        pts[i] += 3;
                                        ftm[i] += 3;
                                        fta[i] += 3;
                                        eff[i] += 3;
                                    } else if (linkText.match('BLK')) {
                                        blk[i] += 1;
                                        eff[i] += 1;
                                    } else if (linkText.match('AST')) {
                                        ast[i] += 1;
                                        eff[i] += 1;
                                    } else if (linkText.match('STL')) {
                                        stl[i] += 1;
                                        eff[i] += 1;
                                    } else if (linkText.match('TO')) {
                                        to[i] += 1;
                                        eff[i] -= 1;
                                    } else if (linkText.match('ROF')) {
                                        rebOff[i] += 1;
                                        eff[i] += 1;
                                    } else if (linkText.match('RDF')) {
                                        rebDef[i] += 1;
                                        eff[i] += 1;
                                    } else if (linkText.match('PF')) {
                                        pf[i] += 1;
                                    }
                                }
                            })
                        }
                    }

                    // function to show stats per quarter and total
                    function statsQuarter(quarter) {
                        statsHeader.textContent = `Estatísticas ${quarter}`;
                        eventsHeader.textContent = `Eventos ${quarter}`;
                        let i = 0;
                        if (quarter == "Q2") {
                            i = 1;
                        } else if (quarter == "Q3") {
                            i = 2;
                        } else if (quarter == "Q4") {
                            i = 3;
                        } else if (quarter == "OT") {
                            i = 4;
                        }
                        links.forEach(link => {
                            const linkText = link.querySelector('a').textContent;
                            if (linkText.startsWith(quarter)) {
                                link.style.display = 'list-item';
                            } else {
                                link.style.display = 'none';
                            }
                        });
                        ptsStats.textContent = pts[i];
                        rebStats.textContent = rebDef[i] + rebOff[i];
                        astStats.textContent = ast[i];
                        stlStats.textContent = stl[i];
                        blkStats.textContent = blk[i];
                        toStats.textContent = to[i];
                        fgmStats.textContent = fgm[i];
                        fgaStats.textContent = fga[i];
                        tpmStats.textContent = tpm[i];
                        tpaStats.textContent = tpa[i];
                        ftmStats.textContent = ftm[i];
                        ftaStats.textContent = fta[i];
                        pfStats.textContent = pf[i];
                        effStats.textContent = eff[i];
                    }

                    document.getElementById('q1-btn').addEventListener('click', () => statsQuarter("Q1"));
                    document.getElementById('q2-btn').addEventListener('click', () => statsQuarter("Q2"));
                    document.getElementById('q3-btn').addEventListener('click', () => statsQuarter("Q3"));
                    document.getElementById('q4-btn').addEventListener('click', () => statsQuarter("Q4"));
                    document.getElementById('ot-btn').addEventListener('click', () => statsQuarter("OT"));

                    document.getElementById('total-btn').addEventListener('click', function () {
                        statsHeader.textContent = "Estatísticas Totais";
                        eventsHeader.textContent = "Eventos Totais";
                        links.forEach(link => {
                            link.style.display = 'list-item';
                        });
                        ptsStats.textContent = pts[0] + pts[1] + pts[2] + pts[3] + pts[4];
                        rebStats.textContent = rebDef[0] + rebOff[0] + rebDef[1] + rebOff[1] + rebDef[2] + rebOff[2] + rebDef[3] + rebOff[3] + rebDef[4] + rebOff[4];
                        astStats.textContent = ast[0] + ast[1] + ast[2] + ast[3] + ast[4];
                        stlStats.textContent = stl[0] + stl[1] + stl[2] + stl[3] + stl[4];
                        blkStats.textContent = blk[0] + blk[1] + blk[2] + blk[3] + blk[4];
                        toStats.textContent = to[0] + to[1] + to[2] + to[3] + to[4];
                        fgmStats.textContent = fgm[0] + fgm[1] + fgm[2] + fgm[3] + fgm[4];
                        fgaStats.textContent = fga[0] + fga[1] + fga[2] + fga[3] + fga[4];
                        tpmStats.textContent = tpm[0] + tpm[1] + tpm[2] + tpm[3] + tpm[4];
                        tpaStats.textContent = tpa[0] + tpa[1] + tpa[2] + tpa[3] + tpa[4];
                        ftmStats.textContent = ftm[0] + ftm[1] + ftm[2] + ftm[3] + ftm[4];
                        ftaStats.textContent = fta[0] + fta[1] + fta[2] + fta[3] + fta[4];
                        pfStats.textContent = pf[0] + pf[1] + pf[2] + pf[3] + pf[4];
                        effStats.textContent = eff[0] + eff[1] + eff[2] + eff[3] + eff[4];
                    });

                    // functions to show events per stats
                    document.getElementById('btn-pts').addEventListener('click', function () {
                        links.forEach(link => {
                            const linkText = link.querySelector('a').textContent;
                            if (linkText.match('FGM') || linkText.match('3PM') || linkText.match('LL-1') || linkText.match('LL-2') || linkText.match('LL-3')) {
                                link.style.display = 'list-item';
                            } else {
                                link.style.display = 'none';
                            }
                        });
                    });

                    document.getElementById('btn-reb').addEventListener('click', function () {
                        links.forEach(link => {
                            const linkText = link.querySelector('a').textContent;
                            if (linkText.match('ROF') || linkText.match('RDF')) {
                                link.style.display = 'list-item';
                            } else {
                                link.style.display = 'none';
                            }
                        });
                    });

                    document.getElementById('btn-ast').addEventListener('click', function () {
                        links.forEach(link => {
                            const linkText = link.querySelector('a').textContent;
                            if (linkText.match('AST')) {
                                link.style.display = 'list-item';
                            } else {
                                link.style.display = 'none';
                            }
                        });
                    });

                    document.getElementById('btn-stl').addEventListener('click', function () {
                        links.forEach(link => {
                            const linkText = link.querySelector('a').textContent;
                            if (linkText.match('STL')) {
                                link.style.display = 'list-item';
                            } else {
                                link.style.display = 'none';
                            }
                        });
                    });

                    document.getElementById('btn-blk').addEventListener('click', function () {
                        links.forEach(link => {
                            const linkText = link.querySelector('a').textContent;
                            if (linkText.match('BLK')) {
                                link.style.display = 'list-item';
                            } else {
                                link.style.display = 'none';
                            }
                        });
                    });

                    document.getElementById('btn-to').addEventListener('click', function () {
                        links.forEach(link => {
                            const linkText = link.querySelector('a').textContent;
                            if (linkText.match('TO')) {
                                link.style.display = 'list-item';
                            } else {
                                link.style.display = 'none';
                            }
                        });
                    });

                    document.getElementById('btn-fg').addEventListener('click', function () {
                        links.forEach(link => {
                            const linkText = link.querySelector('a').textContent;
                            if (linkText.match('FGM') || linkText.match('FGA')) {
                                link.style.display = 'list-item';
                            } else {
                                link.style.display = 'none';
                            }
                        });
                    });

                    document.getElementById('btn-3pt').addEventListener('click', function () {
                        links.forEach(link => {
                            const linkText = link.querySelector('a').textContent;
                            if (linkText.match('3PM') || linkText.match('3PA')) {
                                link.style.display = 'list-item';
                            } else {
                                link.style.display = 'none';
                            }
                        });
                    });

                    document.getElementById('btn-ft').addEventListener('click', function () {
                        links.forEach(link => {
                            const linkText = link.querySelector('a').textContent;
                            if (linkText.match('LL')) {
                                link.style.display = 'list-item';
                            } else {
                                link.style.display = 'none';
                            }
                        });
                    });

                    document.getElementById('btn-pf').addEventListener('click', function () {
                        links.forEach(link => {
                            const linkText = link.querySelector('a').textContent;
                            if (linkText.match('PF')) {
                                link.style.display = 'list-item';
                            } else {
                                link.style.display = 'none';
                            }
                        });
                    });

                    document.getElementById('btn-eff').addEventListener('click', function () {
                        links.forEach(link => {
                            const linkText = link.querySelector('a').textContent;
                            link.style.display = 'list-item';
                        });
                    });

                    // call function to calculate stats
                    calculateStats(links, quarters);

                    // initialize with the total stats
                    statsHeader.textContent = "Estatísticas Totais";
                    eventsHeader.textContent = "Eventos Totais";
                    ptsStats.textContent = pts[0] + pts[1] + pts[2] + pts[3] + pts[4];
                    rebStats.textContent = rebDef[0] + rebOff[0] + rebDef[1] + rebOff[1] + rebDef[2] + rebOff[2] + rebDef[3] + rebOff[3] + rebDef[4] + rebOff[4];
                    astStats.textContent = ast[0] + ast[1] + ast[2] + ast[3] + ast[4];
                    stlStats.textContent = stl[0] + stl[1] + stl[2] + stl[3] + stl[4];
                    blkStats.textContent = blk[0] + blk[1] + blk[2] + blk[3] + blk[4];
                    toStats.textContent = to[0] + to[1] + to[2] + to[3] + to[4];
                    fgmStats.textContent = fgm[0] + fgm[1] + fgm[2] + fgm[3] + fgm[4];
                    fgaStats.textContent = fga[0] + fga[1] + fga[2] + fga[3] + fga[4];
                    tpmStats.textContent = tpm[0] + tpm[1] + tpm[2] + tpm[3] + tpm[4];
                    tpaStats.textContent = tpa[0] + tpa[1] + tpa[2] + tpa[3] + tpa[4];
                    ftmStats.textContent = ftm[0] + ftm[1] + ftm[2] + ftm[3] + ftm[4];
                    ftaStats.textContent = fta[0] + fta[1] + fta[2] + fta[3] + fta[4];
                    pfStats.textContent = pf[0] + pf[1] + pf[2] + pf[3] + pf[4];
                    effStats.textContent = eff[0] + eff[1] + eff[2] + eff[3] + eff[4];
                })
                .catch(error => console.error('Error fetching the JSON file:', error));
        }
        fetch('https://raw.githubusercontent.com/joaocbarrozo/game-stats/refs/heads/main/jogos.JSON')
            .then(response => response.json())
            .then(data => {
                // player selected
                const playerSelected = document.getElementById("player-selection");
                const player = data["jogadores"].find(jogador => jogador.nome === playerSelected.value);
                playerSelected.addEventListener("change", () => {
                    const selectedPlayer = playerSelected.value;
                    const player = data.jogadores.find(jogador => jogador.nome === selectedPlayer);
                    const gameOptions = document.getElementById("game-selection");
                    // Clear previous game options
                    gameOptions.innerHTML = "";
                    // Populate game options based on the selected player
                    player.jogos.forEach(jogo => {
                        const option = document.createElement("option");
                        option.value = jogo.data;
                        option.textContent = `${jogo.data}-${jogo["adversário"]}`;
                        gameOptions.appendChild(option);
                    });
                });
                // Trigger change event to populate game options on initial load 
                playerSelected.dispatchEvent(new Event("change"));
            });

        const btnSelectGame = document.getElementById("btn-select-game");
        btnSelectGame.addEventListener("click", () => fetchData())
        //fetchData();
    </script>
</body>

</html>